"use strict";(self.webpackChunkvue3_antd_admin=self.webpackChunkvue3_antd_admin||[]).push([[5487],{90746:function(e,t,a){a.r(t),a.d(t,{default:function(){return y}});var n=a(66252),s=a(3577);const l={class:"table-search"},r={class:"search-submitButtons",style:{float:"right",overflow:"hidden"}},o=(0,n.Uk)(" 重置 "),c=(0,n.Uk)(" 查询 ");var d=a(2262),m=a(87849),u=a(53641),i=a(49963);const f=(0,n.aZ)({name:"QueryForm",components:{DownOutlined:m.Z,SchemaForm:u.default},props:{defaultShowItems:{type:Number,default:3},formProps:{type:Object,default:()=>({})},columns:{type:Object,required:!0}},emits:["query","reset"],setup(e,{slots:t,emit:a}){const n=(0,d.qj)({advanced:!1,labelMap:{}}),s=(0,d.iH)(),l=e=>`${e.key||e.dataIndex||""}`.split(".").pop()||"",r=(0,d.Fl)((()=>(n.advanced?.5:0)+"turn")),o=(0,d.Fl)((()=>({schemas:n.advanced?c.value:c.value.slice(0,e.defaultShowItems),labelWidth:80,...e.formProps}))),c=(0,d.Fl)((()=>e.columns.filter((e=>!e.hideInSearch&&!!l(e))).map((e=>({field:e.formItemProps?.field??e.searchField??l(e),component:"Input",label:e.title,colProps:{span:8},...e.formItemProps})))));return{...(0,d.BK)(n),dynamicFormRef:s,turn:r,reset:()=>{s.value?.resetFields()},query:async()=>{const e=await(s.value?.validate());a("query",e)},calcSubBtnOffset:a=>{const s=(n.advanced?Object.keys(t).length:e.defaultShowItems)*a,l=s%24;return s<24||0===l?0:24-l},formSchema:o,formItemSchemas:c,toggleAdvanced:()=>{n.advanced=!n.advanced}}}}),p=()=>{(0,i.sj)((e=>({69857300:e.turn})))},h=f.setup;f.setup=h?(e,t)=>(p(),h(e,t)):p;var v=f;var y=(0,a(83744).Z)(v,[["render",function(e,t,a,d,m,u){const i=(0,n.up)("a-button"),f=(0,n.up)("DownOutlined"),p=(0,n.up)("schema-form");return(0,n.wg)(),(0,n.iD)("div",l,[(0,n.Wm)(p,{ref:"dynamicFormRef","form-schema":e.formSchema},{"operate-button":(0,n.w5)((()=>[(0,n._)("span",r,[(0,n._)("span",null,[(0,n.Wm)(i,{type:"default",style:{"margin-right":"10px"},onClick:e.reset},{default:(0,n.w5)((()=>[o])),_:1},8,["onClick"]),(0,n.Wm)(i,{type:"primary",onClick:e.query},{default:(0,n.w5)((()=>[c])),_:1},8,["onClick"])]),e.formItemSchemas.length>0&&e.formItemSchemas.length>e.defaultShowItems?((0,n.wg)(),(0,n.iD)("a",{key:0,style:{"margin-left":"8px"},onClick:t[0]||(t[0]=(...t)=>e.toggleAdvanced&&e.toggleAdvanced(...t))},[(0,n.Uk)((0,s.zw)(e.advanced?"收起":"展开")+" ",1),(0,n.Wm)(f,{class:"collapse-icon"})])):(0,n.kq)("",!0)])])),_:1},8,["form-schema"])])}],["__scopeId","data-v-1f73bd71"]])}}]);