"use strict";(self.webpackChunkvue3_antd_admin=self.webpackChunkvue3_antd_admin||[]).push([[3541],{67186:function(e,t,i){i.r(t),i.d(t,{default:function(){return U}});var n=i(66252),l=i(49963),o=i(3577),a=["src"],r=["src"],u={key:0,class:"toolbar"};var c=i(95082),d=i(82482),m=(i(49282),i(47297)),s=(i(68309),i(2262)),g=i(78582),p=i(73974),v=i(9173),f=i(83925),h=i(60191),w=i(27959);i(74916),i(23123),i(41539),i(78783),i(33948),i(60285),i(41637);function S(e){var t=e.lastIndexOf("/")+1,i=e.substring(t);return i=decodeURI(i.split("?")[0])}var y=(0,n.aZ)({name:"PreviewModal",components:(0,d.Z)({ZoomInOutlined:g.Z,ZoomOutOutlined:p.Z,RedoOutlined:v.Z,DownloadOutlined:f.Z,CloseCircleOutlined:h.Z,OneToOneOutlined:w.Z},m.Z.name,m.Z),props:{visible:{type:Boolean,default:!1},type:{type:String,default:"image"},url:{type:String,default:""}},emits:["update:visible"],setup:function(e,t){var i,n=t.emit,l=(0,s.iH)(),o=(0,s.qj)({timer:null,loading:!1,rotateDeg:0,imgScale:1,scaleCV:.07,initWidth:0,initHeight:0,contentStyle:{width:"60vw",height:"60vh"},imgStyle:{width:"",height:"",transform:"rotate(0)"}}),a=(0,s.Fl)({get:function(){return e.visible},set:function(e){return n("update:visible",e)}}),r=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"scale";o.imgStyle.width=o.initWidth*o.imgScale+"px",o.imgStyle.height=o.initHeight*o.imgScale+"px","init"===t?(o.imgStyle.maxWidth="",o.imgStyle.maxHeight=""):(o.imgStyle.maxWidth="none!important",o.imgStyle.maxHeight="none!important"),clearTimeout(i),i=setTimeout((function(){var e;return null===(e=l.value)||void 0===e?void 0:e.classList.remove("active")}),1400),null===(e=l.value)||void 0===e||e.classList.add("active"),o.contentStyle={}};return(0,c.Z)((0,c.Z)({},(0,s.BK)(o)),{},{imgScaleMask:l,isVisible:a,rotateImg:function(){o.rotateDeg-=90,o.imgStyle.transform="rotate(".concat(o.rotateDeg,"deg)")},saveImg:function(e){!function(e){var t=e.url,i=e.target,n=void 0===i?"_blank":i,l=e.fileName,o=new URL(t).host==location.host;new Promise((function(e,i){if(o){var a=document.createElement("a");if(a.href=t,a.target=n,void 0!==a.download&&(a.download=l||S(t)),document.createEvent){var r=document.createEvent("MouseEvents");return r.initEvent("click",!0,!0),a.dispatchEvent(r),e(!0)}return-1===t.indexOf("?")&&(t+="?download"),window.open(t,n),e(!0)}var u=document.createElement("canvas"),c=document.createElement("img");c.setAttribute("crossOrigin","Anonymous"),c.src=t,c.onload=function(i){u.width=c.width,u.height=c.height,u.getContext("2d").drawImage(c,0,0,c.width,c.height),u.toBlob((function(i){var n=document.createElement("a");n.href=window.URL.createObjectURL(i),n.download=S(t),n.click(),URL.revokeObjectURL(n.href),e(!0)}),"image/jpeg")},c.onerror=function(e){return i(e)}}))}({url:e})},zoomInImg:function(){o.imgScale+=o.scaleCV,r()},zoomOutImg:function(){o.imgScale-=o.scaleCV,r()},handZoom:r,imgLoaded:function(e){var t;if(null!==(t=e.currentTarget)&&void 0!==t&&t.complete){var i=getComputedStyle(e.currentTarget),n=i.width,l=i.height;o.imgStyle.width=n,o.imgStyle.height=l,o.initWidth=parseFloat(n),o.initHeight=parseFloat(l)}},resetImg:function(){o.imgScale=1,r()}})}});const k=(0,i(83744).Z)(y,[["render",function(e,t,i,c,d,m){var s=(0,n.up)("close-circle-outlined"),g=(0,n.up)("a-spin"),p=(0,n.up)("zoom-in-outlined"),v=(0,n.up)("zoom-out-outlined"),f=(0,n.up)("one-to-one-outlined"),h=(0,n.up)("redo-outlined"),w=(0,n.up)("download-outlined");return(0,n.wg)(),(0,n.j4)(n.lR,{to:"body"},[e.isVisible?((0,n.wg)(),(0,n.iD)("div",{key:0,class:"preview-modal",onClick:t[5]||(t[5]=(0,l.iM)((function(t){return e.isVisible=!1}),["self"]))},[(0,n.Wm)(s,{class:"close-icon",onClick:t[0]||(t[0]=function(t){return e.isVisible=!1})}),(0,n._)("div",{class:"preview-content",style:(0,o.j5)(e.contentStyle)},[(0,n.Wm)(g,{spinning:e.loading},{default:(0,n.w5)((function(){return["image"===e.type?((0,n.wg)(),(0,n.iD)("img",{key:0,ref:"img",style:(0,o.j5)(e.imgStyle),src:e.url,alt:"",onLoad:t[1]||(t[1]=(0,l.iM)((function(){return e.imgLoaded&&e.imgLoaded.apply(e,arguments)}),["stop"]))},null,44,a)):(0,n.kq)("",!0),"video"===e.type?((0,n.wg)(),(0,n.iD)("video",{key:1,ref:"video",src:e.url,controls:"",autoplay:"",onCanplay:t[2]||(t[2]=function(t){return e.loading=!1}),onLoadstart:t[3]||(t[3]=function(t){return e.loading=!0})},null,40,r)):(0,n.kq)("",!0),(0,n._)("div",{ref:"imgScaleMask",class:"img-scale-mask"},(0,o.zw)(~~(100*e.imgScale)+"%"),513)]})),_:1},8,["spinning"])],4),"image"===e.type?((0,n.wg)(),(0,n.iD)("div",u,[(0,n.Wm)(p,{title:"放大",onClick:e.zoomInImg},null,8,["onClick"]),(0,n.Wm)(v,{title:"缩放",onClick:e.zoomOutImg},null,8,["onClick"]),(0,n.Wm)(f,{title:"原始比例",onClick:e.resetImg},null,8,["onClick"]),(0,n.Wm)(h,{title:"旋转",onClick:e.rotateImg},null,8,["onClick"]),(0,n.Wm)(w,{title:"下载",onClick:t[4]||(t[4]=function(t){return e.saveImg(e.url)})})])):(0,n.kq)("",!0)])):(0,n.kq)("",!0)])}]]);var U=k},93541:function(e,t,i){i.r(t),i.d(t,{default:function(){return v}});i(12431);var n=i(66900),l=(i(58293),i(45542)),o=i(95082),a=i(66252),r=i(2262),u=i(46231),c=i(67186),d=(0,a.Uk)(" 示意图："),m=(0,a.Uk)(" (例如：//at.alicdn.com/t/font_1166867_7zdsgx6x88l.js) "),s=(0,a.Uk)(" （例如：icon-huanfu1、icon-zhutipifu、icon-xinwendongtai1） "),g={key:1},p=(0,a.aZ)((0,o.Z)((0,o.Z)({},{name:"CustomIcon"}),{},{setup:function(e){var t=(0,r.qj)({scriptUrl:"",iconName:"",visible:!1,imageUrl:""}),i=function(e){t.imageUrl=e.target.currentSrc,t.visible=!0};return function(e,o){var p=(0,a.up)("a-input"),v=(0,a.up)("a-card");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)((0,r.SU)(l.Z),{message:"自定义图标",description:"使用阿里图标库，可以有效减小项目的体积，支持离线本地图标和在线图标",type:"info","show-icon":"",style:{"margin-bottom":"12px"}}),(0,a.Wm)(v,null,{default:(0,a.w5)((function(){return[d,(0,a._)("img",{class:"image-demo",src:"http://ww1.sinaimg.cn/large/005IOlAWgy1gl8bm4ot9dj314r0opabq.jpg",onClick:i}),(0,r.SU)(t).visible?((0,a.wg)(),(0,a.j4)(c.default,{key:0,visible:(0,r.SU)(t).visible,"onUpdate:visible":o[0]||(o[0]=function(e){return(0,r.SU)(t).visible=e}),type:"image",url:(0,r.SU)(t).imageUrl},null,8,["visible","url"])):(0,a.kq)("",!0),(0,a.Wm)((0,r.SU)(n.ZP),{title:"使用示例",column:1},{default:(0,a.w5)((function(){return[(0,a.Wm)((0,r.SU)(n.ZP).Item,{label:"阿里图标路径"},{default:(0,a.w5)((function(){return[(0,a.Wm)(p,{value:(0,r.SU)(t).scriptUrl,"onUpdate:value":o[1]||(o[1]=function(e){return(0,r.SU)(t).scriptUrl=e}),style:{width:"400px"},placeholder:"请输入你的阿里巴巴矢量图标库项目图标的路径"},null,8,["value"]),m]})),_:1}),(0,a.Wm)((0,r.SU)(n.ZP).Item,{label:"图标名字"},{default:(0,a.w5)((function(){return[(0,a.Wm)(p,{value:(0,r.SU)(t).iconName,"onUpdate:value":o[2]||(o[2]=function(e){return(0,r.SU)(t).iconName=e}),placeholder:"请输入图标的名字",style:{width:"200px"}},null,8,["value"]),s]})),_:1}),(0,a.Wm)((0,r.SU)(n.ZP).Item,{label:"效果"},{default:(0,a.w5)((function(){return[(0,r.SU)(t).scriptUrl&&(0,r.SU)(t).iconName?((0,a.wg)(),(0,a.j4)((0,r.SU)(u.IconFont),{key:0,"script-url":(0,r.SU)(t).scriptUrl,type:(0,r.SU)(t).iconName,size:"30"},null,8,["script-url","type"])):((0,a.wg)(),(0,a.iD)("span",g,"可以复制示例的地址和图标查看效果"))]})),_:1})]})),_:1})]})),_:1})])}}}));var v=(0,i(83744).Z)(p,[["__scopeId","data-v-078d7f0b"]])}}]);