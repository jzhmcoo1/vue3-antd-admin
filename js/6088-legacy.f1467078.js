"use strict";(self.webpackChunkvue3_antd_admin=self.webpackChunkvue3_antd_admin||[]).push([[6088,1674,3772],{70853:function(e,n,t){t.r(n),t.d(n,{TableAction:function(){return r.default},QueryForm:function(){return a.default},ToolBar:function(){return o.default}});var r=t(64471),a=t(90746),o=t(50631)},24718:function(e,n,t){t.r(n),t.d(n,{usePagination:function(){return o}});var r=t(95082),a=(t(43304),t(2262));function o(e){var n=(0,a.iH)(!1);return Object.is(e,!1)||(n.value=(0,r.Z)({current:1,pageSize:10,total:0,pageSizeOptions:["10","20","30","40","50"],showQuickJumper:!0,showSizeChanger:!0,showTotal:function(e){return"共 ".concat(e," 条")}},e)),{paginationRef:n}}},90746:function(e,n,t){t.r(n),t.d(n,{default:function(){return w}});var r=t(66252),a=t(3577),o={class:"table-search"},u={class:"search-submitButtons",style:{float:"right",overflow:"hidden"}},l=(0,r.Uk)(" 重置 "),i=(0,r.Uk)(" 查询 ");var c=t(48534),s=t(95082),d=(t(35666),t(9653),t(74916),t(23123),t(47042),t(21249),t(57327),t(41539),t(47941),t(2262)),f=t(87849),p=t(71206),m=t(49963),v=(0,r.aZ)({name:"QueryForm",components:{DownOutlined:f.Z,SchemaForm:p.default},props:{defaultShowItems:{type:Number,default:3},formProps:{type:Object,default:function(){return{}}},columns:{type:Object,required:!0}},emits:["query","reset"],setup:function(e,n){var t=n.slots,r=n.emit,a=(0,d.qj)({advanced:!1,labelMap:{}}),o=(0,d.iH)(),u=function(e){return"".concat(e.key||e.dataIndex||"").split(".").pop()||""},l=(0,d.Fl)((function(){return"".concat(a.advanced?.5:0,"turn")})),i=(0,d.Fl)((function(){return(0,s.Z)({schemas:a.advanced?f.value:f.value.slice(0,e.defaultShowItems),labelWidth:80},e.formProps)})),f=(0,d.Fl)((function(){return e.columns.filter((function(e){return!e.hideInSearch&&!!u(e)})).map((function(e){var n,t,r;return(0,s.Z)({field:null!==(n=null!==(t=null===(r=e.formItemProps)||void 0===r?void 0:r.field)&&void 0!==t?t:e.searchField)&&void 0!==n?n:u(e),component:"Input",label:e.title,colProps:{span:8}},e.formItemProps)}))})),p=function(){var e=(0,c.Z)(regeneratorRuntime.mark((function e(){var n,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(n=o.value)||void 0===n?void 0:n.validate();case 2:t=e.sent,r("query",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,s.Z)((0,s.Z)({},(0,d.BK)(a)),{},{dynamicFormRef:o,turn:l,reset:function(){var e;null===(e=o.value)||void 0===e||e.resetFields()},query:p,calcSubBtnOffset:function(n){var r=(a.advanced?Object.keys(t).length:e.defaultShowItems)*n,o=r%24;return r<24||0===o?0:24-o},formSchema:i,formItemSchemas:f,toggleAdvanced:function(){a.advanced=!a.advanced}})}}),g=function(){(0,m.sj)((function(e){return{69857300:e.turn}}))},h=v.setup;v.setup=h?function(e,n){return g(),h(e,n)}:g;var y=v;const b=(0,t(83744).Z)(y,[["render",function(e,n,t,c,s,d){var f=(0,r.up)("a-button"),p=(0,r.up)("DownOutlined"),m=(0,r.up)("schema-form");return(0,r.wg)(),(0,r.iD)("div",o,[(0,r.Wm)(m,{ref:"dynamicFormRef","form-schema":e.formSchema},{"operate-button":(0,r.w5)((function(){return[(0,r._)("span",u,[(0,r._)("span",null,[(0,r.Wm)(f,{type:"default",style:{"margin-right":"10px"},onClick:e.reset},{default:(0,r.w5)((function(){return[l]})),_:1},8,["onClick"]),(0,r.Wm)(f,{type:"primary",onClick:e.query},{default:(0,r.w5)((function(){return[i]})),_:1},8,["onClick"])]),e.formItemSchemas.length>0&&e.formItemSchemas.length>e.defaultShowItems?((0,r.wg)(),(0,r.iD)("a",{key:0,style:{"margin-left":"8px"},onClick:n[0]||(n[0]=function(){return e.toggleAdvanced&&e.toggleAdvanced.apply(e,arguments)})},[(0,r.Uk)((0,a.zw)(e.advanced?"收起":"展开")+" ",1),(0,r.Wm)(p,{class:"collapse-icon"})])):(0,r.kq)("",!0)])]})),_:1},8,["form-schema"])])}],["__scopeId","data-v-1f73bd71"]]);var w=b},64471:function(e,n,t){t.r(n),t.d(n,{default:function(){return l}});t(15921);var r=t(87204),a=(t(92222),t(66252)),o=t(2262),u=t(3577);var l=(0,a.aZ)({props:{actions:{type:Array,default:function(){return[]}}},setup:function(e){return function(n,t){var l=(0,a.up)("a-button");return(0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.actions,(function(e,n){return(0,a.wg)(),(0,a.j4)((0,a.LL)(e.popConfirm?(0,o.SU)(r.Z):"span"),(0,a.dG)({key:"".concat(n,"-").concat(e.label),title:e.title,"ok-text":"确认","cancel-text":"取消"},e.popConfirm),{default:(0,a.w5)((function(){return[(0,a.Wm)(l,(0,a.dG)({type:"link"},e),{default:(0,a.w5)((function(){return[(0,a.Uk)((0,u.zw)(e.label),1)]})),_:2},1040)]})),_:2},1040,["title"])})),128)}}})},86088:function(e,n,t){t.r(n),t.d(n,{default:function(){return b}});t(74916),t(64765),t(57327),t(41539),t(46314);var r=t(66252),a=t(3577),o={class:"bg-white"};var u=t(48534),l=t(95082),i=(t(6788),t(97139)),c=(t(6571),t(13252)),s=t(57557),d=t.n(s),f=(t(35666),t(43304),t(26699),t(32023),t(47941),t(92222),t(2262)),p=t(97307),m=t(24718),v=t(70094),g=t(70029),h=t(70853),y=(0,r.aZ)({name:"DynamicTable",components:{Table:c.ZP,Space:i.Z,TableAction:h.TableAction,QueryForm:h.QueryForm,ToolBar:h.ToolBar},inheritAttrs:!1,props:(0,l.Z)((0,l.Z)({},(0,p.iO)()),{},{formProps:{type:Object,default:function(){return{}}},columns:{type:Object,required:!0},dataRequest:{type:Function},showToolBar:{type:Boolean,default:!0},headerTitle:String,search:{type:Boolean,default:!0}}),emits:["change","update:pageOption"],setup:function(e,n){var t=n.emit,a=n.slots;(0,g.createTableContext)((0,r.FN)());var o=(0,f.iH)(),i=(0,f.iH)(),c=(0,f.Fl)((function(){return(0,l.Z)((0,l.Z)({},e),(0,f.SU)(i))})),s=(0,m.usePagination)(e.pagination).paginationRef,p=(0,f.qj)({expandItemRefs:{},tableData:[],loading:!1});(0,r.YP)((function(){return e.dataSource}),(function(e){e&&(p.tableData=e)}),{deep:!0,immediate:!0});var h=function(){var n=(0,u.Z)(regeneratorRuntime.mark((function n(){var t,r,a,o,u,i=arguments;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:{},!Object.is(e.dataSource,void 0)||!Object.prototype.toString.call(e.dataRequest).includes("Function")){n.next=11;break}return a=(0,f.SU)(s),o=(0,l.Z)({},t),(0,v.Kn)(a)&&Object.assign(o,{page:a.current,limit:a.pageSize}),p.loading=!0,n.next=8,null==e||null===(r=e.dataRequest)||void 0===r?void 0:r.call(e,o).finally((function(){return p.loading=!1}));case 8:null!=(u=n.sent)&&u.pagination&&Object.assign((0,f.SU)(s),{current:~~(null==u?void 0:u.pagination.page),pageSize:~~(null==u?void 0:u.pagination.size),total:~~(null==u?void 0:u.pagination.total)}),p.tableData=(null==u?void 0:u.list)||[];case 11:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();h();var y=(0,f.Fl)((function(){var e,n=(0,f.SU)(c),t=(0,l.Z)((0,l.Z)({},n),{},{rowKey:null!==(e=n.rowKey)&&void 0!==e?e:"id",loading:p.loading,tableLayout:"fixed",pagination:(0,f.SU)(s)});return a.expandedRowRender&&(t=d()(t,"scroll")),t=d()(t,["class","onChange"])}));return(0,l.Z)((0,l.Z)({},(0,f.BK)(p)),{},{tableRef:o,defaultSlots:["emptyText","expandIcon","title","footer","summary","expandedRowRender","customFilterIcon","customFilterDropdown"],getProps:c,getBindValues:y,queryTable:function(e){h(e)},setProps:function(e){i.value=(0,l.Z)((0,l.Z)({},(0,f.SU)(i)),e)},getColumnKey:function(e){return e.key||e.dataIndex},handleTableChange:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var a=n[0];Object.keys(a).length&&Object.assign((0,f.SU)(s),a),h(),t.apply(void 0,["change"].concat(n))},refreshTable:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=(0,f.SU)(s);Object.is(e,!0)&&(0,v.Kn)(n)&&(n.current=1),h()}})}});var b=(0,t(83744).Z)(y,[["render",function(e,n,t,u,l,i){var c=(0,r.up)("QueryForm"),s=(0,r.up)("Space"),d=(0,r.up)("ToolBar"),f=(0,r.up)("TableAction"),p=(0,r.up)("Table");return(0,r.wg)(),(0,r.iD)("div",null,[e.search?((0,r.wg)(),(0,r.j4)(c,{key:0,columns:e.columns,formProps:e.formProps,onQuery:e.queryTable},null,8,["columns","formProps","onQuery"])):(0,r.kq)("",!0),(0,r._)("div",o,[e.showToolBar?((0,r.wg)(),(0,r.j4)(d,{key:0,title:e.headerTitle},(0,r.Nv)({_:2},[e.$slots.headerTitle?{name:"headerTitle",fn:(0,r.w5)((function(){return[(0,r.WI)(e.$slots,"headerTitle",{},void 0,!0)]}))}:void 0,e.$slots.toolbar?{name:"toolbar",fn:(0,r.w5)((function(){return[(0,r.Wm)(s,null,{default:(0,r.w5)((function(){return[(0,r.WI)(e.$slots,"toolbar",{},void 0,!0)]})),_:3})]}))}:void 0]),1032,["title"])):(0,r.kq)("",!0),(0,r.Wm)(p,(0,r.dG)({ref:"tableRef"},e.getBindValues,{dataSource:e.tableData,onChange:e.handleTableChange}),(0,r.Nv)({_:2},[(0,r.Ko)(e.defaultSlots.filter((function(n){return Object.hasOwn(e.$slots,n)})),(function(n){return{name:n,fn:(0,r.w5)((function(t){return[(0,r.WI)(e.$slots,n,(0,a.vs)((0,r.F4)(t)),void 0,!0)]}))}})),(0,r.Ko)(["bodyCell","headerCell"],(function(n){return{name:n,fn:(0,r.w5)((function(t){return[(0,r.WI)(e.$slots,n,(0,a.vs)((0,r.F4)(t)),void 0,!0),"bodyCell"===n&&"$action"===e.getColumnKey(t.column)?((0,r.wg)(),(0,r.j4)(f,{key:0,actions:t.column.actions(t)},null,8,["actions"])):(0,r.kq)("",!0),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.columns.filter((function(e){return e[n]})),(function(a){var o;return(0,r.wg)(),(0,r.iD)(r.HY,{key:e.getColumnKey(a)},[e.getColumnKey(t.column)===e.getColumnKey(a)?((0,r.wg)(),(0,r.j4)((0,r.LL)(null==a||null===(o=a[n])||void 0===o?void 0:o.call(a,t)),{key:0})):(0,r.kq)("",!0)],64)})),128))]}))}}))]),1040,["dataSource","onChange"])])])}],["__scopeId","data-v-20895536"]])}}]);